<!DOCTYPE html>
<html>
	<head>
		<title>Search Sample</title>
		<link rel="stylesheet" type="text/css" href="test.css" />
	</head>
	<body class="on">
		<h2>Search</h2>
		<table>
			<thead>
				<tr>
					<th></th>
					<th></th>
					<th>Enabled</th>
					<th>Disabled</th>
					<th>Focus</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td>LTR</td>
					<td>Empty</td>
					<td>
						<div class="search">
							<input type="search" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" disabled />
							<input type="button" value="Search" class="search-button" disabled />
							<input type="button" value="Clear" class="clear-button" disabled />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" class="vui-input-focus" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
				</tr>
				<tr>
					<td>LTR</td>
					<td>Placeholder</td>
					<td>
						<div class="search">
							<input type="search" placeholder="Search..." />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" placeholder="Search..." disabled />
							<input type="button" value="Search" class="search-button" disabled />
							<input type="button" value="Clear" class="clear-button" disabled />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" placeholder="Search..." class="vui-input-focus" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
				</tr>
				<tr>
					<td>LTR</td>
					<td>Value</td>
					<td>
						<div class="search">
							<input type="search" value="long search value" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" value="long search value" disabled />
							<input type="button" value="Search" class="search-button" disabled />
							<input type="button" value="Clear" class="clear-button" disabled />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" value="long search value" class="vui-input-focus" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
				</tr>
				<tr dir="rtl">
					<td>RTL</td>
					<td>Empty</td>
					<td>
						<div class="search">
							<input type="search" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" disabled />
							<input type="button" value="Search" class="search-button" disabled />
							<input type="button" value="Clear" class="clear-button" disabled />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" class="vui-input-focus" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
				</tr>
				<tr dir="rtl">
					<td>RTL</td>
					<td>Placeholder</td>
					<td>
						<div class="search">
							<input type="search" placeholder="Search..." />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" placeholder="Search..." disabled />
							<input type="button" value="Search" class="search-button" disabled />
							<input type="button" value="Clear" class="clear-button" disabled />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" placeholder="Search..." class="vui-input-focus" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
				</tr>
				<tr dir="rtl">
					<td>RTL</td>
					<td>Value</td>
					<td>
						<div class="search">
							<input type="search" value="long search value" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" value="long search value" disabled />
							<input type="button" value="Search" class="search-button" disabled />
							<input type="button" value="Clear" class="clear-button" disabled />
						</div>
					</td>
					<td>
						<div class="search">
							<input type="search" value="long search value" class="vui-input-focus" />
							<input type="button" value="Search" class="search-button" />
							<input type="button" value="Clear" class="clear-button" />
						</div>
					</td>
				</tr>
			</tbody>
		</table>
		<script>
		function init(search) {
			var inputs = search.getElementsByTagName('input');
			var input = inputs[0];
			var search = inputs[1];
			var clear = inputs[2];
			var lastValue = input.value;
			clear.style.display = (input.value.length > 0) ? 'inline' : 'none';
			search.style.display = (input.value.length > 0) ? 'none' : 'inline';
			input.addEventListener('keypress', function(e) {
				if(e.charCode === 13) {
					lastValue = input.value;
					if(input.value.length > 0) {
						clear.style.display = 'inline';
						search.style.display = 'none';
					}
				}
			});
			input.addEventListener('input', function(e) {
				var showClear = (input.value.length > 0 && input.value === lastValue);
				clear.style.display = showClear ? 'inline' : 'none';
				search.style.display = showClear ? 'none' : 'inline';
			});
			search.addEventListener('click', function() {
				lastValue = input.value;
				if(input.value.length === 0) {
					return;
				}
				clear.style.display = 'inline';
				search.style.display = 'none';
				clear.focus();
			});
			clear.addEventListener('click', function() {
				clear.style.display = 'none';
				search.style.display = 'inline';
				input.value = '';
				input.focus();
			});
		}

		var searches = document.getElementsByClassName('search');
		for(var i=0; i<searches.length; i++) {
			init(searches[i]);
		}
		</script>
	</body>
</html>
